{% extends "bootstrap/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}



{% block head %}
  <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.1.3/cosmo/bootstrap.min.css" rel="stylesheet" integrity="sha384-3Ivskwia8Fui5tbQi+RW4DgTkJ8d+hW7mLe7Yk89ibmD9482VECh0WFof8kIEjwI" crossorigin="anonymous">
<style>
    .form-control{
      width: 250px;
      margin: auto;
    }
    .post-form{
      text-align: center;
      margin: auto;
      margin-top: 160px;
      width: 250px;
        }
    .topics {
      background-color: #f1f1f1;
      height: 40px;
      margin-top: 8px;
      padding-top: 10px;
    }


    .topic_span{
       margin: 10px;
       color: #2780e3;
       cursor: pointer;


    }

    .main_content{
        margin-top: 0px;
        background-color: #ffffff;
     }
    body {
       background-color: #f0f8ff;
    }

    .container{
        max-width: 1400px;
    }

    .wrapp_all_content{
       margin-right: 430px;

    }
    .sidebar{
      width:400px;
      float: right;
      background-color: #f1f1f1;
      margin-right: 0px;

    }
    a img {
      width: 400px;
    }
     #navi {
       background-color: #2780e3;
       margin-left: 5px;
       margin-right: 5px;
       padding-top: 10px;
       padding-left: 156px;
       height: 50px;



    }
    #navi li {

      display: inline;
      margin: 6px;
    }
    #navi a {
        color: white;
        text-decoration: none;
    }
    #first_a {
        font-size: 20px;
        padding-top: 0px;
    }
    #content_table {
       <!--border-style: solid; border-width: 5px;-->
    }
    .badge{
       float: right;
       width: 20px;
       padding-right: 100px;
       margin-top: 10px;
       padding-top: 5px;
       color: #2780e3;
    }
    .content-tag{
      width: 60px;
      background-color: #96b880;
      text-align: center;
      color: white;
      <!--border:2px solid ;-->
      border-radius：30px;
    }
    .flask-moment{
        display: inline !important;
    }






</style>


{{ moment.include_jquery() }}
{{ moment.include_moment() }}
{{ moment.locale('zh-cn') }}　



{% endblock %}




{% block content %}

   <div id="navi">
      <ul>
          <li><a href="#" id="first_a">Collection</a></li>
          <li><a href="/">首页</a></li>
          <li><a href="/new">发布</a></li>
          <li><a href="{{ url_for('todo_main.index') }}">TODO</a></li>
      </ul>
  </div>
<div class="container">

<div class="wrapp_all_content">
  <div class="topics">
   <span class="topic_span">Flask</span>
   <span class="topic_span">Python</span>
    <span class="topic_span">Javascript</span>
      <span class="topic_span">数据库</span>
      <span class="topic_span">数据结构与算法</span>
      <span class="topic_span">前端</span>
      <span class="topic_span">读书笔记和杂想</span>
       <span class="topic_span">其他</span>
   </div>

      <div class="main_content">
       {% for x in articles.items %}
           <p class="badge">{{ moment(x.ut).fromNow() }}</p>

          <table id="content_table">
            <tr valign="bottom">
            <td><a href="/detail/{{ x.id }}" class="content_title">{{ x.title | safe }}</a>


            </tr>
            <tr>
                <td><div class="content-tag"><small>{{ x.topic | safe }}</small></div></td>
            </tr>
          </table>

          <HR style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" width="100%" color=#f1f1f1 SIZE=1>
       {% endfor %}
   </div>


</div>

<div>
    <ul class="pagination">
        {% if articles.has_prev %}
            <li class="page-item">
            <a class="page-link" href="?page={{ articles.prev(error_out=False).page }}">&laquo;</a>
            </li>
        {% else %}
            <li class="page-item disabled">
            <a class="page-link" href="#">&laquo;</a>
            </li>
        {% endif %}

        {% for x in range(pages) %}
            <li class="page-item">
              <a class="page-link" href="?page={{ x + 1 }}">{{ x +1 }}</a>
            </li>
        {% endfor %}
        {% if articles.has_next %}
            <li class="page-item">
            <a class="page-link" href="?page={{ articles.next(error_out=False).page }}">&raquo;</a>
            </li>
        {% else %}
            <li class="page-item disabled">
            <a class="page-link" href="#">&raquo;</a>
            </li>
        {% endif %}
    </ul>
</div>

</div>


<script>
    var allTopics = document.getElementsByClassName("topics")[0];
    allTopics.addEventListener('click', function(event){
        var self = event.target
        if(self.classList.contains('topic_span')){
            console.log(self.innerHTML)}

        })
</script>
<script>
    var pagination_cls = document.getElementsByClassName('pagination')[0]
    pagination_cls.addEventListener('click', function(event){
        var focus = event.target
        last_focus = document.getElementsByClassName('active')[0]
        if (last_focus){
            last_focus.classList.remove('active')
        }
        console.log('被点击的元素',focus)
        focus.parentElement.classList.add('active')
    })

</script>
<script src="{{ url_for('static',filename='js/topic.js') }}"></script>
{% endblock %}

